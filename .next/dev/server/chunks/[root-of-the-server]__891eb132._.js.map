{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/URL_SHORTENER/lib/database.js"],"sourcesContent":["// lib/database.js\r\nimport { Pool } from 'pg';\r\n\r\n// Only create Pool if we're on the server side\r\nlet pool;\r\n\r\nif (typeof window === 'undefined') {\r\n  pool = new Pool({\r\n    connectionString: process.env.DATABASE_URL,\r\n    ssl: process.env.NODE_ENV === 'production' ? { rejectUnauthorized: false } : false\r\n  });\r\n}\r\n\r\nexport async function query(text, params) {\r\n  // Only run on server side\r\n  if (typeof window !== 'undefined') {\r\n    throw new Error('Database queries can only be executed on the server side');\r\n  }\r\n\r\n  const client = await pool.connect();\r\n  try {\r\n    const result = await client.query(text, params);\r\n    return result;\r\n  } finally {\r\n    client.release();\r\n  }\r\n}\r\n\r\nexport async function initDB() {\r\n  if (typeof window !== 'undefined') {\r\n    throw new Error('Database initialization can only be done on the server side');\r\n  }\r\n  \r\n  await query(`\r\n    CREATE TABLE IF NOT EXISTS urls (\r\n      id SERIAL PRIMARY KEY,\r\n      slug VARCHAR(10) UNIQUE NOT NULL,\r\n      original_url TEXT NOT NULL,\r\n      clicks INTEGER DEFAULT 0,\r\n      created_at TIMESTAMP DEFAULT NOW()\r\n    );\r\n    CREATE INDEX IF NOT EXISTS idx_slug ON urls(slug);\r\n  `);\r\n}"],"names":[],"mappings":"AAAA,kBAAkB;;;;;;;AAClB;;;;;;AAEA,+CAA+C;AAC/C,IAAI;AAEJ,wCAAmC;IACjC,OAAO,IAAI,4GAAI,CAAC;QACd,kBAAkB,QAAQ,GAAG,CAAC,YAAY;QAC1C,KAAK,sCAAwC,0BAAgC;IAC/E;AACF;AAEO,eAAe,MAAM,IAAI,EAAE,MAAM;IACtC,0BAA0B;IAC1B;;IAIA,MAAM,SAAS,MAAM,KAAK,OAAO;IACjC,IAAI;QACF,MAAM,SAAS,MAAM,OAAO,KAAK,CAAC,MAAM;QACxC,OAAO;IACT,SAAU;QACR,OAAO,OAAO;IAChB;AACF;AAEO,eAAe;IACpB;;IAIA,MAAM,MAAM,CAAC;;;;;;;;;EASb,CAAC;AACH"}},
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///C:/URL_SHORTENER/pages/api/init-db.js"],"sourcesContent":["// pages/api/init-db.js\r\nimport { query } from '../../lib/database';\r\n\r\nexport default async function handler(req, res) {\r\n  if (req.method !== 'GET') {\r\n    return res.status(405).json({ error: 'Method not allowed' });\r\n  }\r\n\r\n  try {\r\n    await query(`\r\n      CREATE TABLE IF NOT EXISTS urls (\r\n        id SERIAL PRIMARY KEY,\r\n        slug VARCHAR(10) UNIQUE NOT NULL,\r\n        original_url TEXT NOT NULL,\r\n        clicks INTEGER DEFAULT 0,\r\n        created_at TIMESTAMP DEFAULT NOW()\r\n      );\r\n      CREATE INDEX IF NOT EXISTS idx_slug ON urls(slug);\r\n    `);\r\n    \r\n    res.status(200).json({ message: 'Database initialized successfully' });\r\n  } catch (error) {\r\n    console.error('Database initialization error:', error);\r\n    res.status(500).json({ error: 'Failed to initialize database' });\r\n  }\r\n}"],"names":[],"mappings":"AAAA,uBAAuB;;;;;AACvB;;;;;;AAEe,eAAe,QAAQ,GAAG,EAAE,GAAG;IAC5C,IAAI,IAAI,MAAM,KAAK,OAAO;QACxB,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAqB;IAC5D;IAEA,IAAI;QACF,MAAM,IAAA,iHAAK,EAAC,CAAC;;;;;;;;;IASb,CAAC;QAED,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,SAAS;QAAoC;IACtE,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;QAChD,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAgC;IAChE;AACF"}}]
}